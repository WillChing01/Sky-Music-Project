{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { useAuthContext } from \"../useAuthContext\";\nconst LOGIN = 'LOGIN';\n\nconst useLogin = () => {\n  _s();\n\n  const {\n    dispatch\n  } = useAuthContext();\n  const [isPending, setIsPending] = useState(false);\n  const [error, setError] = useState(null);\n\n  const proceedLogin = user => {\n    localStorage.setItem('user', JSON.stringify(user));\n    dispatch({\n      type: LOGIN,\n      payload: user\n    });\n  };\n\n  const login = async (username, password) => {\n    setIsPending(true);\n    setError(null);\n    const fetchOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username,\n        password\n      })\n    };\n    const response = await fetch('/api/auth/login', fetchOptions);\n    const data = await response.json();\n\n    if (!response.ok) {\n      setIsPending(false);\n      setError(data.error);\n    } else {\n      proceedLogin(data);\n      setIsPending(false);\n    }\n  };\n\n  return {\n    login,\n    isPending,\n    error\n  };\n};\n\n_s(useLogin, \"oPci7YUyoePvw0A+tHLyuDVCkHs=\", false, function () {\n  return [useAuthContext];\n});\n\nexport default useLogin;","map":{"version":3,"names":["useState","useAuthContext","LOGIN","useLogin","dispatch","isPending","setIsPending","error","setError","proceedLogin","user","localStorage","setItem","JSON","stringify","type","payload","login","username","password","fetchOptions","method","headers","body","response","fetch","data","json","ok"],"sources":["C:/Users/adamg/Documents/temp/sky/Sky-Music-Project/my-app/src/hooks/auth/useLogin.js"],"sourcesContent":["import { useState } from 'react';\r\nimport { useAuthContext } from \"../useAuthContext\";\r\n\r\nconst LOGIN = 'LOGIN';\r\n\r\nconst useLogin = () => {\r\n    const { dispatch } = useAuthContext();\r\n    const [isPending, setIsPending] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    const proceedLogin = (user) => {\r\n        localStorage.setItem('user', JSON.stringify(user));\r\n        dispatch({type: LOGIN, payload: user});\r\n    };\r\n\r\n\r\n    const login = async (username, password) => {\r\n            setIsPending(true);\r\n            setError(null);\r\n    \r\n            const fetchOptions = {\r\n                method: 'POST',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({ username, password })\r\n            }\r\n            const response = await fetch('/api/auth/login', fetchOptions);\r\n            const data = await response.json();\r\n    \r\n            if (!response.ok) {\r\n                setIsPending(false);\r\n                setError(data.error);\r\n            } else {\r\n                proceedLogin(data);\r\n                setIsPending(false)\r\n            }\r\n    };\r\n        \r\n    return { login, isPending, error };\r\n};\r\n \r\nexport default useLogin;\r\n"],"mappings":";;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAASC,cAAT,QAA+B,mBAA/B;AAEA,MAAMC,KAAK,GAAG,OAAd;;AAEA,MAAMC,QAAQ,GAAG,MAAM;EAAA;;EACnB,MAAM;IAAEC;EAAF,IAAeH,cAAc,EAAnC;EACA,MAAM,CAACI,SAAD,EAAYC,YAAZ,IAA4BN,QAAQ,CAAC,KAAD,CAA1C;EACA,MAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAC,IAAD,CAAlC;;EAEA,MAAMS,YAAY,GAAIC,IAAD,IAAU;IAC3BC,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAA7B;IACAN,QAAQ,CAAC;MAACW,IAAI,EAAEb,KAAP;MAAcc,OAAO,EAAEN;IAAvB,CAAD,CAAR;EACH,CAHD;;EAMA,MAAMO,KAAK,GAAG,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;IACpCb,YAAY,CAAC,IAAD,CAAZ;IACAE,QAAQ,CAAC,IAAD,CAAR;IAEA,MAAMY,YAAY,GAAG;MACjBC,MAAM,EAAE,MADS;MAEjBC,OAAO,EAAE;QAAC,gBAAgB;MAAjB,CAFQ;MAGjBC,IAAI,EAAEV,IAAI,CAACC,SAAL,CAAe;QAAEI,QAAF;QAAYC;MAAZ,CAAf;IAHW,CAArB;IAKA,MAAMK,QAAQ,GAAG,MAAMC,KAAK,CAAC,iBAAD,EAAoBL,YAApB,CAA5B;IACA,MAAMM,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAAnB;;IAEA,IAAI,CAACH,QAAQ,CAACI,EAAd,EAAkB;MACdtB,YAAY,CAAC,KAAD,CAAZ;MACAE,QAAQ,CAACkB,IAAI,CAACnB,KAAN,CAAR;IACH,CAHD,MAGO;MACHE,YAAY,CAACiB,IAAD,CAAZ;MACApB,YAAY,CAAC,KAAD,CAAZ;IACH;EACR,CAnBD;;EAqBA,OAAO;IAAEW,KAAF;IAASZ,SAAT;IAAoBE;EAApB,CAAP;AACH,CAjCD;;GAAMJ,Q;UACmBF,c;;;AAkCzB,eAAeE,QAAf"},"metadata":{},"sourceType":"module"}